<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scroll Based Animation</title>
  <style>
      /* Изолированные стили с уникальными префиксами */
    body {
      margin: 0;
      overflow-x: hidden;
    }

    .scroll-animation-section {
      position: relative;
    }

    /* Контейнер блока с анимацией */
    .scroll-animation-block {
      position: relative;
      height: 1200px;
      background-color: transparent;
    }

    /* Мембрана */
    .scroll-membrane {
      width: 420px;
      height: 190px;
      background: url('https://pandadevelopmentcompany.github.io/arvidal_assets/membrane_main.png') no-repeat center;
      background-size: contain;
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0; /* Мембрана скрыта по умолчанию */
      transition: opacity 1s ease-out, top 1s ease-out;
    }
    .scroll-membrane::after {
      content: 'Membrane cell';
      position: absolute;
      font-size: 16px;
      color: #333;
      background-color: #f9f9f9;
      padding: 8px 15px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    /* Молекула */
    .scroll-molecule {
      width: 150px;
      height: 150px;
      background: url('https://pandadevelopmentcompany.github.io/arvidal_assets/mu_agonist_main.svg') no-repeat center;
      background-size: contain;
      position: absolute;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: top 1s ease-out, opacity 1s ease-out;
    }
    .scroll-molecule::after {
      content: 'Arvidal®';
      position: absolute;
      font-size: 16px;
      color: #333;
      background-color: #f9f9f9;
      padding: 8px 15px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    /* Легкие */
    .scroll-lungs {
      width: 400px;
      height: 400px;
      position: absolute;
      top: 0%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 1s ease-out, top 1s ease-out, left 1s ease-out;
      position: relative;
    }
    .scroll-lungs::after {
      content: 'Pro- inflammatory cytokines';
      position: absolute;
      font-size: 16px;
      color: #333;
      background-color: #f9f9f9;
      padding: 8px 15px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .scroll-lungs img {
      width: 100%;
      height: auto;
      object-fit: contain;
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0;
      animation: lungsImageChange 6s ease-in-out infinite;
    }
    .scroll-lungs img:first-child {
      opacity: 1;
      animation-delay: 3s;
    }
    .scroll-lungs img:last-child {
      opacity: 1;
      animation-delay: 1s;
    }

    /* Интерфероны */
    .scroll-interferons {
      width: 400px;
      height: 300px;
      background: url('https://pandadevelopmentcompany.github.io/arvidal_assets/interferons_main.png') no-repeat center;
      background-size: contain;
      position: absolute;
      top: 0%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 1s ease-out, top 1s ease-out, left 1s ease-out;
    }

    /* Карточка с описанием для легких */
    .scroll-lungs-description {
      position: absolute;
      bottom: -180px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 350px;
      background-color: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      opacity: 0;
      transition: opacity 1s ease-out;
      font-size: 16px;
    }

    /* Карточка с описанием для интерферонов */
    .scroll-interferons-description {
      position: absolute;
      bottom: -210px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 350px;
      background-color: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      opacity: 0;
      transition: opacity 1s ease-out;
      font-size: 16px;
    }

    /* Анимация чередования картинок легких */
    @keyframes lungsImageChange {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0;
      }
    }

/* адаптация под устройства */
@media screen and (max-width: 576px) {
  .scroll-membrane {
    max-width: 300px !important;
    left: 51%;
  }
  .scroll-lungs {
    max-width: 300px !important;
    left: 51% !important;
    top: 50% !important;
  }
  .scroll-lungs-description {
    bottom: -90px !important;
  }
  .scroll-interferons {
    max-width: 300px !important;
    left: 51% !important;
    top: 80% !important;
  }
  .scroll-interferons-description {
    bottom: -160px !important;
  }
  .scroll-animation-block {
    height: 1500px !important;
  }
}

  </style>
</head>

  <div class="scroll-animation-section">
    <div class="scroll-animation-block">
      <div class="scroll-membrane"></div>
      <div class="scroll-molecule"></div>

      <!-- Блок с легкими и их изображениями, а также карточкой с описанием -->
      <div class="scroll-lungs">
        <img src="https://pandadevelopmentcompany.github.io/arvidal_assets/lungs_treat_main.png" alt="lungs with cytokines">
        <img src="https://pandadevelopmentcompany.github.io/arvidal_assets/lungs_clean_main.png" alt="lungs without cytokines">
        <div class="scroll-lungs-description">
          Suppresses the hypersecretion of pro-inflammatory cytokines (such as IL-1, IL-6, and TNF-α), thereby reducing intoxication and controlling hyperinflammation with signs of cytokine storm and associated acute respiratory distress syndrome (ARDS).
          <br><br>
          Prevents lung damage, averting pneumonia.
        </div>
      </div>

      <!-- Блок с интерферонами, а также карточкой с описанием -->
      <div class="scroll-interferons">
        <div class="scroll-interferons-description">
          Stimulates the production of endogenous interferons at the early stages of infection.
          <br><br>
          Regulation of the phagocytic component activity of innate immunity (macrophages and neutrophils), along with the activity of lymphocytes – natural killers.
        </div>
      </div>
    </div>
  </div>





  <script>
   document.addEventListener('DOMContentLoaded', () => {
  const animBlock = document.querySelector('.scroll-animation-block'); // Убедитесь, что этот селектор правильный
  const molecule = document.querySelector('.scroll-molecule');
  const membrane = document.querySelector('.scroll-membrane');
  const lungs = document.querySelector('.scroll-lungs');
  const interferons = document.querySelector('.scroll-interferons');
  const lungsDescription = document.querySelector('.scroll-lungs-description');
  const interferonsDescription = document.querySelector('.scroll-interferons-description');

  // Проверяем, существуют ли элементы
  if (!animBlock || !molecule || !membrane || !lungs || !interferons || !lungsDescription || !interferonsDescription) {
    console.error('Некоторые элементы не найдены в DOM. Проверьте селекторы.');
    return;
  }

  let isInView = false;

  const options = {
    root: null, // viewport
    rootMargin: "0px",
    threshold: 0.1
  };

  // Создаем IntersectionObserver для отслеживания появления animBlock
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        isInView = true;
        startAnimation();
      } else {
        isInView = false;
        resetAnimation();
      }
    });
  }, options);

  observer.observe(animBlock);

  // Запуск анимации
  function startAnimation() {
    window.addEventListener('scroll', moveElements);
    molecule.style.opacity = '1';
  }

  // Сброс анимации
  function resetAnimation() {
    window.removeEventListener('scroll', moveElements);
    molecule.style.top = '60px';
    molecule.style.opacity = '0';
    membrane.style.opacity = '0';
    lungs.style.opacity = '0';
    interferons.style.opacity = '0';
    lungsDescription.style.opacity = '0';
    interferonsDescription.style.opacity = '0';
    lungs.style.top = '100%';
    lungs.style.left = '50%';
    interferons.style.top = '100%';
    interferons.style.left = '50%';
  }

  // Движение элементов на основе скролла
  function moveElements() {
    if (!isInView) return;

    let scrollPosition = window.scrollY + window.innerHeight / 2; // Центр экрана
    let blockTop = animBlock.getBoundingClientRect().top + window.scrollY; // Положение блока
    let blockHeight = animBlock.offsetHeight;

    let scrollInsideBlock = scrollPosition - blockTop;

    if (scrollInsideBlock >= 0 && scrollInsideBlock <= blockHeight) {
      let percentage = scrollInsideBlock / blockHeight;
      let newMoleculeTop = (percentage * blockHeight);
      molecule.style.top = `${newMoleculeTop}px`;

      if (percentage >= 0.2) { // Логический порог для membrane
        membrane.style.opacity = '1';
      }

      if (percentage >= 0.4) { // Логический порог для lungs и interferons
        lungs.style.opacity = '1';
        lungs.style.top = '40%';
        lungs.style.left = '20%';
        lungsDescription.style.opacity = '1';
        interferons.style.opacity = '1';
        interferons.style.top = '45%';
        interferons.style.left = '80%';
        interferonsDescription.style.opacity = '1';
      } else {
        lungs.style.opacity = '0';
        interferons.style.opacity = '0';
        lungsDescription.style.opacity = '0';
        interferonsDescription.style.opacity = '0';
      }
    }
  }
});

  </script>

</body>
</html>
